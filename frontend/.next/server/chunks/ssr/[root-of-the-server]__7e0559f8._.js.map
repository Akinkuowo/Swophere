{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///Users/greatware/Desktop/All%20Folders/Projects/Swophere/frontend/src/app/components/login.tsx"],"sourcesContent":["// components/LoginForm.tsx\n\n'use client';\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Swal from 'sweetalert2';\nimport { Eye, EyeOff } from 'lucide-react';\n\nconst API_BASE_URL = 'http://localhost:4000';\n\nexport default function LoginForm() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [showPassword, setShowPassword] = useState(false);\n  const router = useRouter();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/auth/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email, password }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Login failed');\n      }\n\n      if (data.success) {\n        // Store user data in localStorage\n        localStorage.setItem('user', JSON.stringify(data.user));\n        localStorage.setItem('session_token', data.session.token);\n        localStorage.setItem('session_expires', data.session.expiresAt);\n        localStorage.setItem('last_login_stamp', Date.now().toString());\n        \n        // Show success message\n        Swal.fire({\n          icon: 'success',\n          title: 'Login Successful!',\n          text: 'Welcome back!',\n          confirmButtonColor: '#6b21a8',\n        }).then(() => {\n          // Redirect to dashboard\n          router.push(`/dashboard?userId=${data.user.userId}`);\n        });\n      } else {\n        setError(data.message);\n        Swal.fire({\n          icon: 'error',\n          title: 'Login Failed',\n          text: data.message,\n          confirmButtonColor: '#d33',\n        });\n      }\n    } catch (error: any) {\n      console.error('Login error:', error);\n      setError(error.message || 'An error occurred during login');\n      Swal.fire({\n        icon: 'error',\n        title: 'Oops...',\n        text: error.message || 'An error occurred during login',\n        confirmButtonColor: '#d33',\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const togglePasswordVisibility = () => {\n    setShowPassword(!showPassword);\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-cover bg-center\" \n         style={{ backgroundImage: \"url('/images/page-title.jpg')\" }}>\n      <div className=\"max-w-md w-full mx-4\">\n        <div className=\"bg-white p-8 rounded-lg shadow-lg\">\n          <form onSubmit={handleSubmit}>\n            <div className=\"flex justify-center mb-6\">\n              <img \n                src=\"/images/logo.png\" \n                alt=\"LetSwap Logo\" \n                className=\"w-1/2\"\n              />\n            </div>\n\n            {error && (\n              <div className=\"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded\">\n                {error}\n              </div>\n            )}\n\n            <div className=\"mb-4\">\n              <label htmlFor=\"email\" className=\"block text-gray-700 text-sm font-bold mb-2\">\n                Email\n              </label>\n              <input\n                type=\"email\"\n                id=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                placeholder=\"Enter Your Email Address\"\n                required\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-600\"\n              />\n            </div>\n\n            <div className=\"mb-6\">\n              <label htmlFor=\"password\" className=\"block text-gray-700 text-sm font-bold mb-2\">\n                Password\n              </label>\n              <div className=\"relative\">\n                <input\n                  type={showPassword ? 'text' : 'password'}\n                  id=\"password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  placeholder=\"Enter Your Password\"\n                  required\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-600 pr-10\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={togglePasswordVisibility}\n                  className=\"cursor-pointer absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 focus:outline-none\"\n                  aria-label={showPassword ? 'Hide password' : 'Show password'}\n                >\n                  {showPassword ? (\n                    <EyeOff size={20} className=\"text-gray-400\" />\n                  ) : (\n                    <Eye size={20} className=\"text-gray-400\" />\n                  )}\n                </button>\n              </div>\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"cursor-pointer w-full bg-purple-600 text-yellow-400 py-3 px-4 rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed font-medium\"\n            >\n              {loading ? (\n                <span className=\"flex items-center justify-center\">\n                  <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                  </svg>\n                  Logging In...\n                </span>\n              ) : (\n                'Log In'\n              )}\n            </button>\n\n            <div className=\"mt-4 text-center\">\n              <p className=\"text-gray-600\">\n                Don't have an account?{' '}\n                <a href=\"/signup\" className=\"text-yellow-600 hover:underline font-medium\">\n                  Sign Up Here!\n                </a>\n              </p>\n            </div>\n\n            <div className=\"mt-2 text-center\">\n              <p className=\"text-sm text-gray-600\">\n                Forgot your password?{' '}\n                <a href=\"/forgot-password\" className=\"text-yellow-600 hover:underline\">\n                  Reset It Here!\n                </a>\n              </p>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}