{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/greatware/Desktop/All%20Folders/Projects/Swophere/frontend/src/app/components/menu.tsx"],"sourcesContent":["// components/Menu.tsx\n\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\nimport Swal from 'sweetalert2';\nimport { Bell, Layers, User, List, Mail, Power, MessageCircle, Package, CheckCircle, XCircle } from 'lucide-react';\n\nexport interface User {\n  userId: string;\n  firstName: string;\n  lastName: string;\n  username: string;\n  email: string;\n  phone?: string;\n  dateOfBirth?: string;\n  country?: string;\n  state?: string;\n  address?: string;\n  facebook?: string;\n  twitter?: string;\n  linkedin?: string;\n  instagram?: string;\n}\n\ninterface Notification {\n  id: string;\n  userId: string;\n  type: string;\n  title: string;\n  message: string;\n  relatedId?: string;\n  relatedUsername?: string;\n  metadata?: {\n    senderName?: string;\n    messagePreview?: string;\n    swapTitle?: string;\n  };\n  isRead: boolean;\n  createdAt: string;\n}\n\ninterface MenuProps {\n  user: User | null;\n}\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:4000';\n\nexport default function Menu({ user }: MenuProps) {\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const [isNotificationsOpen, setIsNotificationsOpen] = useState(false);\n  const [isUserMenuOpen, setIsUserMenuOpen] = useState(false);\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const router = useRouter();\n\n  // Fetch notifications on component mount and when user changes\n  useEffect(() => {\n    if (user?.username) {\n      fetchNotifications();\n      // Set up polling for new notifications every 30 seconds\n      const interval = setInterval(() => {\n        fetchUnreadCount();\n      }, 30000);\n\n      return () => clearInterval(interval);\n    }\n  }, [user?.username]);\n\n  const fetchNotifications = async () => {\n    if (!user?.username) return;\n\n    try {\n      setLoading(true);\n      const response = await fetch(\n        `${API_BASE_URL}/api/notifications/${user.username}?limit=10&unreadOnly=false`\n      );\n      const data = await response.json();\n\n      if (data.success) {\n        setNotifications(data.notifications);\n        setUnreadCount(data.unreadCount);\n      }\n    } catch (error) {\n      console.error('Error fetching notifications:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchUnreadCount = async () => {\n    if (!user?.username) return;\n\n    try {\n      const response = await fetch(\n        `${API_BASE_URL}/api/notifications/${user.username}/unread-count`\n      );\n      const data = await response.json();\n\n      if (data.success) {\n        setUnreadCount(data.unreadCount);\n      }\n    } catch (error) {\n      console.error('Error fetching unread count:', error);\n    }\n  };\n\n  const handleNotificationClick = async (notification: Notification) => {\n    // Mark as read\n    if (!notification.isRead) {\n      try {\n        await fetch(`${API_BASE_URL}/api/notifications/${notification.id}/read`, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            username: user?.username\n          })\n        });\n\n        // Update local state\n        setNotifications(prev =>\n          prev.map(n => n.id === notification.id ? { ...n, isRead: true } : n)\n        );\n        setUnreadCount(prev => Math.max(0, prev - 1));\n      } catch (error) {\n        console.error('Error marking notification as read:', error);\n      }\n    }\n\n    // Navigate based on notification type\n    if (notification.type === 'MESSAGE' && notification.relatedUsername) {\n      router.push(`/messages?user=${notification.relatedUsername}`);\n    } else if (notification.type === 'SWAP_INTEREST' && notification.relatedId) {\n      router.push(`/swaps/${notification.relatedId}`);\n    } else if (notification.type === 'SWAP_APPROVED' && notification.relatedId) {\n      router.push(`/swaps/${notification.relatedId}`);\n    } else if (notification.type === 'SWAP_REJECTED' && notification.relatedId) {\n      router.push(`/my-listing`);\n    }\n\n    setIsNotificationsOpen(false);\n  };\n\n  const markAllAsRead = async () => {\n    if (!user?.username) return;\n\n    try {\n      const response = await fetch(\n        `${API_BASE_URL}/api/notifications/${user.username}/mark-all-read`,\n        {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json',\n          }\n        }\n      );\n\n      const data = await response.json();\n\n      if (data.success) {\n        setNotifications(prev => prev.map(n => ({ ...n, isRead: true })));\n        setUnreadCount(0);\n      }\n    } catch (error) {\n      console.error('Error marking all as read:', error);\n    }\n  };\n\n  const clearAllNotifications = async () => {\n    if (!user?.username) return;\n\n    const result = await Swal.fire({\n      title: 'Clear All Notifications?',\n      text: 'This will delete all your notifications permanently.',\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#6b21a8',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Yes, clear all!'\n    });\n\n    if (result.isConfirmed) {\n      try {\n        const response = await fetch(\n          `${API_BASE_URL}/api/notifications/${user.username}/clear-all`,\n          {\n            method: 'DELETE',\n            headers: {\n              'Content-Type': 'application/json',\n            }\n          }\n        );\n\n        const data = await response.json();\n\n        if (data.success) {\n          setNotifications([]);\n          setUnreadCount(0);\n          Swal.fire('Cleared!', 'All notifications have been deleted.', 'success');\n        }\n      } catch (error) {\n        console.error('Error clearing notifications:', error);\n        Swal.fire('Error', 'Failed to clear notifications.', 'error');\n      }\n    }\n  };\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case 'MESSAGE':\n        return <MessageCircle size={18} className=\"text-blue-600\" />;\n      case 'SWAP_INTEREST':\n        return <Package size={18} className=\"text-purple-600\" />;\n      case 'SWAP_APPROVED':\n        return <CheckCircle size={18} className=\"text-green-600\" />;\n      case 'SWAP_REJECTED':\n        return <XCircle size={18} className=\"text-red-600\" />;\n      default:\n        return <Bell size={18} className=\"text-gray-600\" />;\n    }\n  };\n\n  const getNotificationBgColor = (type: string) => {\n    switch (type) {\n      case 'MESSAGE':\n        return 'bg-blue-100';\n      case 'SWAP_INTEREST':\n        return 'bg-purple-100';\n      case 'SWAP_APPROVED':\n        return 'bg-green-100';\n      case 'SWAP_REJECTED':\n        return 'bg-red-100';\n      default:\n        return 'bg-gray-100';\n    }\n  };\n\n  const formatTimestamp = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffInMs = now.getTime() - date.getTime();\n    const diffInMinutes = Math.floor(diffInMs / (1000 * 60));\n    const diffInHours = Math.floor(diffInMs / (1000 * 60 * 60));\n    const diffInDays = Math.floor(diffInMs / (1000 * 60 * 60 * 24));\n\n    if (diffInMinutes < 1) return 'Just now';\n    if (diffInMinutes < 60) return `${diffInMinutes}m ago`;\n    if (diffInHours < 24) return `${diffInHours}h ago`;\n    if (diffInDays < 7) return `${diffInDays}d ago`;\n    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n  };\n\n  const handleLogout = () => {\n    Swal.fire({\n      title: 'Logout?',\n      text: 'Are you sure you want to logout?',\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#6b21a8',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Yes, logout!'\n    }).then((result) => {\n      if (result.isConfirmed) {\n        localStorage.removeItem('user');\n        localStorage.removeItem('session_token');\n        localStorage.removeItem('last_login_stamp');\n        router.push('/');\n      }\n    });\n  };\n\n  return (\n    <header className=\"bg-white shadow-lg sticky top-0 z-50\">\n      <div className=\"max-w-7xl mx-auto px-4\">\n        <div className=\"flex justify-between items-center h-16\">\n          {/* Left Side - Logo and Navigation */}\n          <div className=\"flex items-center space-x-8\">\n            {/* Logo */}\n            <Link href=\"/dashboard\" className=\"flex items-center\">\n              <img src=\"/images/logo.png\" alt=\"LetSwap Logo\" className=\"h-8\" />\n            </Link>\n\n            {/* Hamburger Menu for Mobile */}\n            <button\n              className=\"md:hidden p-2 rounded-md text-gray-600 hover:text-purple-600 hover:bg-gray-100\"\n              onClick={() => setIsMenuOpen(!isMenuOpen)}\n            >\n              <div className=\"w-6 h-6 flex flex-col justify-center\">\n                <span className={`block h-0.5 w-6 bg-current transform transition duration-300 ease-in-out ${isMenuOpen ? 'rotate-45 translate-y-1.5' : ''}`}></span>\n                <span className={`block h-0.5 w-6 bg-current transition duration-300 ease-in-out mt-1 ${isMenuOpen ? 'opacity-0' : 'opacity-100'}`}></span>\n                <span className={`block h-0.5 w-6 bg-current transform transition duration-300 ease-in-out mt-1 ${isMenuOpen ? '-rotate-45 -translate-y-1.5' : ''}`}></span>\n              </div>\n            </button>\n\n            {/* Desktop Navigation */}\n            <nav className=\"hidden md:flex space-x-6\">\n              <Link href=\"/dashboard\" className=\"text-purple-600 font-medium border-b-2 border-purple-600 py-1\">\n                Home\n              </Link>\n              <Link href=\"/listing\" className=\"text-gray-600 hover:text-purple-600 font-medium py-1 transition duration-200\">\n                Swops\n              </Link>\n              <Link href=\"/messages\" className=\"text-gray-600 hover:text-purple-600 font-medium py-1 transition duration-200\">\n                My Messages\n              </Link>\n              <Link href=\"/add-swap\" className=\"text-gray-600 hover:text-purple-600 font-medium py-1 transition duration-200\">\n                Create a Swop\n              </Link>\n              <Link href=\"/advert-booking\" className=\"text-gray-600 hover:text-purple-600 font-medium py-1 transition duration-200\">\n                Advert Booking\n              </Link>\n            </nav>\n          </div>\n\n          {/* Right Side - User Menu and Notifications */}\n          <div className=\"flex items-center space-x-4\">\n            {/* Notifications */}\n            <div className=\"relative\">\n              <button\n                onClick={() => {\n                  setIsNotificationsOpen(!isNotificationsOpen);\n                  if (!isNotificationsOpen) {\n                    fetchNotifications();\n                  }\n                }}\n                className=\"cursor-pointer p-2 text-gray-600 hover:text-purple-600 relative\"\n              >\n                <Bell size={20} />\n                {unreadCount > 0 && (\n                  <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center\">\n                    {unreadCount > 9 ? '9+' : unreadCount}\n                  </span>\n                )}\n              </button>\n\n              {/* Notifications Dropdown */}\n              {isNotificationsOpen && (\n                <div className=\"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-50\">\n                  <div className=\"p-4 border-b border-gray-200 flex justify-between items-center\">\n                    <h3 className=\"font-semibold text-gray-800\">\n                      Notifications {unreadCount > 0 && `(${unreadCount})`}\n                    </h3>\n                    {notifications.length > 0 && (\n                      <div className=\"flex space-x-2\">\n                        <button\n                          onClick={markAllAsRead}\n                          className=\"text-xs text-purple-600 hover:text-purple-700 font-medium\"\n                        >\n                          Mark all read\n                        </button>\n                        <span className=\"text-gray-300\">|</span>\n                        <button\n                          onClick={clearAllNotifications}\n                          className=\"text-xs text-red-600 hover:text-red-700 font-medium\"\n                        >\n                          Clear all\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                  \n                  <div className=\"max-h-96 overflow-y-auto\">\n                    {loading ? (\n                      <div className=\"p-8 text-center\">\n                        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto\"></div>\n                        <p className=\"text-gray-500 text-sm mt-2\">Loading notifications...</p>\n                      </div>\n                    ) : notifications.length === 0 ? (\n                      <div className=\"p-8 text-center\">\n                        <Bell size={48} className=\"mx-auto text-gray-300 mb-4\" />\n                        <p className=\"text-gray-500\">No notifications yet</p>\n                        <p className=\"text-sm text-gray-400 mt-1\">\n                          You'll be notified about messages and swap updates here\n                        </p>\n                      </div>\n                    ) : (\n                      notifications.map((notification) => (\n                        <div\n                          key={notification.id}\n                          onClick={() => handleNotificationClick(notification)}\n                          className={`p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition duration-200 ${\n                            !notification.isRead ? 'bg-blue-50' : ''\n                          }`}\n                        >\n                          <div className=\"flex items-start space-x-3\">\n                            <div className={`w-10 h-10 rounded-full flex items-center justify-center ${getNotificationBgColor(notification.type)}`}>\n                              {getNotificationIcon(notification.type)}\n                            </div>\n                            <div className=\"flex-1 min-w-0\">\n                              <div className=\"flex justify-between items-start\">\n                                <p className={`text-sm ${!notification.isRead ? 'font-semibold text-gray-900' : 'text-gray-800'}`}>\n                                  {notification.title}\n                                </p>\n                                {!notification.isRead && (\n                                  <span className=\"ml-2 w-2 h-2 bg-blue-500 rounded-full flex-shrink-0\"></span>\n                                )}\n                              </div>\n                              <p className=\"text-sm text-gray-600 mt-1 line-clamp-2\">\n                                {notification.message}\n                              </p>\n                              {notification.metadata?.messagePreview && (\n                                <p className=\"text-xs text-gray-500 mt-1 italic line-clamp-1\">\n                                  \"{notification.metadata.messagePreview}\"\n                                </p>\n                              )}\n                              <span className=\"text-xs text-gray-500 mt-1 block\">\n                                {formatTimestamp(notification.createdAt)}\n                              </span>\n                            </div>\n                          </div>\n                        </div>\n                      ))\n                    )}\n                  </div>\n                  \n                  {notifications.length > 0 && (\n                    <div className=\"p-4 text-center border-t border-gray-200\">\n                      <Link \n                        href=\"/notifications\" \n                        className=\"text-purple-600 hover:text-purple-700 font-medium text-sm\"\n                        onClick={() => setIsNotificationsOpen(false)}\n                      >\n                        View All Notifications\n                      </Link>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n\n            {/* User Menu */}\n            <div className=\"relative\">\n              <button\n                onClick={() => setIsUserMenuOpen(!isUserMenuOpen)}\n                className=\"cursor-pointer flex items-center space-x-2 p-2 text-gray-700 hover:text-purple-600\"\n              >\n                <img \n                  src=\"/images/dashboard-avatar.jpg\" \n                  alt=\"User Avatar\" \n                  className=\"w-8 h-8 rounded-full\"\n                />\n                <span className=\"hidden md:block font-medium\">\n                  Hi, {user?.firstName || user?.username}!\n                </span>\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                </svg>\n              </button>\n\n              {/* User Dropdown Menu */}\n              {isUserMenuOpen && (\n                <div className=\"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border border-gray-200 z-50\">\n                  <div className=\"py-1\">\n                    <Link href=\"/add-swap\" className=\"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\">\n                      <Layers size={16} className=\"mr-3\" />\n                      Add Swap\n                    </Link>\n                    <Link href=\"/my-profile\" className=\"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\">\n                      <User size={16} className=\"mr-3\" />\n                      My Profile\n                    </Link>\n                    <Link href=\"/my-listing\" className=\"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\">\n                      <List size={16} className=\"mr-3\" />\n                      My Swaps\n                    </Link>\n                    <Link href=\"/messages\" className=\"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\">\n                      <Mail size={16} className=\"mr-3\" />\n                      Messages\n                    </Link>\n                    <div className=\"border-t border-gray-100\"></div>\n                    <button\n                      onClick={handleLogout}\n                      className=\"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-gray-100\"\n                    >\n                      <Power size={16} className=\"mr-3\" />\n                      Logout\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Mobile Navigation Menu */}\n        {isMenuOpen && (\n          <div className=\"md:hidden border-t border-gray-200\">\n            <nav className=\"py-2 space-y-1\">\n              <Link href=\"/dashboard\" className=\"block py-2 px-4 text-purple-600 font-medium bg-purple-50\">\n                Home\n              </Link>\n              <Link href=\"/listing\" className=\"block py-2 px-4 text-gray-600 hover:text-purple-600 hover:bg-gray-50\">\n                Swops\n              </Link>\n              <Link href=\"/messages\" className=\"block py-2 px-4 text-gray-600 hover:text-purple-600 hover:bg-gray-50\">\n                My Messages\n              </Link>\n              <Link href=\"/add-swap\" className=\"block py-2 px-4 text-gray-600 hover:text-purple-600 hover:bg-gray-50\">\n                Create a Swop\n              </Link>\n              <Link href=\"/advert-booking\" className=\"block py-2 px-4 text-gray-600 hover:text-purple-600 hover:bg-gray-50\">\n                Advert Booking\n              </Link>\n            </nav>\n          </div>\n        )}\n      </div>\n\n      {/* Overlay for closing menus when clicking outside */}\n      {(isMenuOpen || isNotificationsOpen || isUserMenuOpen) && (\n        <div \n          className=\"fixed inset-0 z-40\"\n          onClick={() => {\n            setIsMenuOpen(false);\n            setIsNotificationsOpen(false);\n            setIsUserMenuOpen(false);\n          }}\n        ></div>\n      )}\n    </header>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 967, "column": 0}, "map": {"version":3,"sources":["file:///Users/greatware/Desktop/All%20Folders/Projects/Swophere/frontend/src/app/components/footer.tsx"],"sourcesContent":["// components/Footer.tsx\n\nimport Link from 'next/link';\n\nexport default function Footer() {\n  return (\n    <footer className=\"bg-gray-800 text-white\">\n      <div className=\"max-w-7xl mx-auto px-4 py-12\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8\">\n          {/* About Us */}\n          <div className=\"md:col-span-1\">\n            <h4 className=\"text-lg font-semibold mb-4\">About Us</h4>\n            <p className=\"text-gray-300 text-sm leading-relaxed\">\n              We are building the most effective and efficient global online trade exchange community; \n              where individuals can trade and exchange directly with each other their products, skills \n              and services without the use of CASH.\n            </p>\n          </div>\n\n          {/* Useful Links */}\n          <div>\n            <h4 className=\"text-lg font-semibold mb-4\">Useful Links</h4>\n            <ul className=\"space-y-2\">\n              <li>\n                <Link href=\"/dashboard\" className=\"text-gray-300 hover:text-white text-sm transition duration-200\">\n                  Home\n                </Link>\n              </li>\n              <li>\n                <Link href=\"/faqs\" className=\"text-gray-300 hover:text-white text-sm transition duration-200\">\n                  FAQ\n                </Link>\n              </li>\n              <li>\n                <Link href=\"/contact\" className=\"text-gray-300 hover:text-white text-sm transition duration-200\">\n                  Contact\n                </Link>\n              </li>\n            </ul>\n          </div>\n\n          {/* My Account */}\n          <div>\n            <h4 className=\"text-lg font-semibold mb-4\">My Account</h4>\n            <ul className=\"space-y-2\">\n              <li>\n                <Link href=\"/messages\" className=\"text-gray-300 hover:text-white text-sm transition duration-200\">\n                  My Messages\n                </Link>\n              </li>\n              <li>\n                <Link href=\"/my-profile\" className=\"text-gray-300 hover:text-white text-sm transition duration-200\">\n                  My Profile\n                </Link>\n              </li>\n              <li>\n                <Link href=\"/my-listing\" className=\"text-gray-300 hover:text-white text-sm transition duration-200\">\n                  My Swops\n                </Link>\n              </li>\n            </ul>\n          </div>\n\n          {/* How it Works */}\n          <div>\n            <h4 className=\"text-lg font-semibold mb-4\">How it Works</h4>\n            <ul className=\"space-y-2\">\n              <li>\n                <Link href=\"/login\" className=\"text-gray-300 hover:text-white text-sm transition duration-200\">\n                  Sign In\n                </Link>\n              </li>\n              <li>\n                <Link href=\"/signup\" className=\"text-gray-300 hover:text-white text-sm transition duration-200\">\n                  Register\n                </Link>\n              </li>\n              <li>\n                <Link href=\"/add-swap\" className=\"text-gray-300 hover:text-white text-sm transition duration-200\">\n                  Add Swop\n                </Link>\n              </li>\n              <li>\n                <Link href=\"/privacy-policy\" className=\"text-gray-300 hover:text-white text-sm transition duration-200\">\n                  Privacy Policy\n                </Link>\n              </li>\n            </ul>\n          </div>\n        </div>\n\n        {/* Copyright */}\n        <div className=\"border-t border-gray-700 mt-8 pt-8 text-center\">\n          <p className=\"text-gray-400 text-sm\">\n            Copyright Â© 2025 SwopHere. All Rights Reserved.\n          </p>\n        </div>\n      </div>\n    </footer>\n  );\n}"],"names":[],"mappings":"AAAA,wBAAwB;;;;;AAExB;;;AAEe,SAAS;IACtB,qBACE,6LAAC;QAAO,WAAU;kBAChB,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAG,WAAU;8CAA6B;;;;;;8CAC3C,6LAAC;oCAAE,WAAU;8CAAwC;;;;;;;;;;;;sCAQvD,6LAAC;;8CACC,6LAAC;oCAAG,WAAU;8CAA6B;;;;;;8CAC3C,6LAAC;oCAAG,WAAU;;sDACZ,6LAAC;sDACC,cAAA,6LAAC,+JAAA,CAAA,UAAI;gDAAC,MAAK;gDAAa,WAAU;0DAAiE;;;;;;;;;;;sDAIrG,6LAAC;sDACC,cAAA,6LAAC,+JAAA,CAAA,UAAI;gDAAC,MAAK;gDAAQ,WAAU;0DAAiE;;;;;;;;;;;sDAIhG,6LAAC;sDACC,cAAA,6LAAC,+JAAA,CAAA,UAAI;gDAAC,MAAK;gDAAW,WAAU;0DAAiE;;;;;;;;;;;;;;;;;;;;;;;sCAQvG,6LAAC;;8CACC,6LAAC;oCAAG,WAAU;8CAA6B;;;;;;8CAC3C,6LAAC;oCAAG,WAAU;;sDACZ,6LAAC;sDACC,cAAA,6LAAC,+JAAA,CAAA,UAAI;gDAAC,MAAK;gDAAY,WAAU;0DAAiE;;;;;;;;;;;sDAIpG,6LAAC;sDACC,cAAA,6LAAC,+JAAA,CAAA,UAAI;gDAAC,MAAK;gDAAc,WAAU;0DAAiE;;;;;;;;;;;sDAItG,6LAAC;sDACC,cAAA,6LAAC,+JAAA,CAAA,UAAI;gDAAC,MAAK;gDAAc,WAAU;0DAAiE;;;;;;;;;;;;;;;;;;;;;;;sCAQ1G,6LAAC;;8CACC,6LAAC;oCAAG,WAAU;8CAA6B;;;;;;8CAC3C,6LAAC;oCAAG,WAAU;;sDACZ,6LAAC;sDACC,cAAA,6LAAC,+JAAA,CAAA,UAAI;gDAAC,MAAK;gDAAS,WAAU;0DAAiE;;;;;;;;;;;sDAIjG,6LAAC;sDACC,cAAA,6LAAC,+JAAA,CAAA,UAAI;gDAAC,MAAK;gDAAU,WAAU;0DAAiE;;;;;;;;;;;sDAIlG,6LAAC;sDACC,cAAA,6LAAC,+JAAA,CAAA,UAAI;gDAAC,MAAK;gDAAY,WAAU;0DAAiE;;;;;;;;;;;sDAIpG,6LAAC;sDACC,cAAA,6LAAC,+JAAA,CAAA,UAAI;gDAAC,MAAK;gDAAkB,WAAU;0DAAiE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAShH,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;;;;;;;;;;;AAO/C;KAhGwB","debugId":null}},
    {"offset": {"line": 1279, "column": 0}, "map": {"version":3,"sources":["file:///Users/greatware/Desktop/All%20Folders/Projects/Swophere/frontend/src/app/components/messages.tsx"],"sourcesContent":["// src/app/messages/page.tsx\n\n'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport Link from 'next/link';\nimport Menu from '../components/menu';\nimport Footer from '../components/footer';\nimport { \n  MessageCircle, \n  User, \n  Search, \n  Send, \n  Paperclip, \n  MoreVertical,\n  ArrowLeft,\n  MapPin,\n  Calendar,\n  Plus,\n  Star,\n  FileText,\n  Eye\n} from 'lucide-react';\n\ninterface User {\n  userId: string;\n  firstName: string;\n  lastName: string;\n  username: string;\n  email: string;\n}\n\ninterface MessageThread {\n  id: string;\n  otherUser: string;\n  lastMessage: string;\n  timestamp: string;\n  unread: boolean;\n  userAvatar?: string;\n}\n\ninterface Message {\n  id: string;\n  fromUser: string;\n  toUser: string;\n  message: string;\n  timestamp: string;\n  read: boolean;\n}\n\ninterface SwapOwnerInfo {\n  username: string;\n  firstName: string;\n  lastName: string;\n  userId: string;\n}\n\ninterface Agreement {\n  id: string;\n  status: string;\n  createdBy: string;\n  otherParty: string;\n}\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:4000';\n\nexport default function MessagesContent() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const selectedUser = searchParams.get('user');\n  const swapOwnerParam = selectedUser;\n  \n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [messageThreads, setMessageThreads] = useState<MessageThread[]>([]);\n  const [selectedThread, setSelectedThread] = useState<MessageThread | null>(null);\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [sending, setSending] = useState(false);\n  const [isNewConversation, setIsNewConversation] = useState(false);\n  const [swapOwnerInfo, setSwapOwnerInfo] = useState<SwapOwnerInfo | null>(null);\n  const [userSwaps, setUserSwaps] = useState<any[]>([]);\n  const [hasSwapsWithOtherUser, setHasSwapsWithOtherUser] = useState(false);\n  const [existingAgreement, setExistingAgreement] = useState<Agreement | null>(null);\n  const [checkingAgreement, setCheckingAgreement] = useState(false);\n\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const fetchUserData = async () => {\n      try {\n        const storedUser = localStorage.getItem('user');\n        if (storedUser) {\n          const userData = JSON.parse(storedUser);\n          setUser(userData);\n          \n          await fetchMessageThreads(userData.username);\n          await fetchUserSwaps(userData.userId);\n        \n          if (swapOwnerParam) {\n            try {\n              const swapOwnerData = swapOwnerParam;\n              setSwapOwnerInfo(swapOwnerData);\n              \n              setTimeout(async () => {\n                setMessageThreads(prevThreads => {\n                  const existingThread = prevThreads.find(t => t.otherUser === swapOwnerData);\n                  \n                  if (existingThread) {\n                    setSelectedThread(existingThread);\n                    setIsNewConversation(false);\n                    fetchMessages(swapOwnerData);\n                    return prevThreads;\n                  } else {\n                    const swapOwnerThread: MessageThread = {\n                      id: `swap-owner-${swapOwnerData}`,\n                      otherUser: swapOwnerData,\n                      lastMessage: 'Start conversation about swap...',\n                      timestamp: new Date().toISOString(),\n                      unread: false\n                    };\n                    \n                    setSelectedThread(swapOwnerThread);\n                    setIsNewConversation(true);\n                    setMessages([]);\n                    \n                    return [swapOwnerThread, ...prevThreads];\n                  }\n                });\n              }, 100);\n            } catch (error) {\n              console.error('Error parsing swap owner data:', error);\n            }\n          }\n        } else {\n          router.push('/login');\n        }\n      } catch (error) {\n        console.error('Error fetching user data:', error);\n        router.push('/login');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchUserData();\n  }, [router, swapOwnerParam]);\n\n  useEffect(() => {\n    if (selectedThread && user) {\n      checkUserSwapsWithOtherUser();\n      checkExistingAgreement();\n    }\n  }, [selectedThread, user, userSwaps]);\n\n  useEffect(() => {\n    if (selectedUser && user && messageThreads.length > 0 && !swapOwnerParam) {\n      handleUserSelection(selectedUser);\n    }\n  }, [selectedUser, user, messageThreads, swapOwnerParam]);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const fetchUserSwaps = async (userId: string) => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/swaps/user/${userId}?status=ACCEPTED`);\n      const data = await response.json();\n\n      if (data.success) {\n        setUserSwaps(data.swaps);\n      }\n    } catch (error) {\n      console.error('Error fetching user swaps:', error);\n    }\n  };\n\n  const checkUserSwapsWithOtherUser = () => {\n    const hasAcceptedSwaps = userSwaps.length > 0;\n    setHasSwapsWithOtherUser(hasAcceptedSwaps);\n  };\n\n  const checkExistingAgreement = async () => {\n    if (!user || !selectedThread) return;\n    \n    setCheckingAgreement(true);\n    try {\n      // Check for agreements where current user is either creator or other party\n      const response = await fetch(\n        `${API_BASE_URL}/api/agreements/check?user1=${user.username}&user2=${selectedThread.otherUser}`\n      );\n      const data = await response.json();\n\n      if (data.success && data.agreement) {\n        setExistingAgreement(data.agreement);\n      } else {\n        setExistingAgreement(null);\n      }\n    } catch (error) {\n      console.error('Error checking existing agreement:', error);\n      setExistingAgreement(null);\n    } finally {\n      setCheckingAgreement(false);\n    }\n  };\n\n  const fetchMessageThreads = async (username: string) => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/messages/threads/${username}`);\n      const data = await response.json();\n\n      if (data.success) {\n        setMessageThreads(data.threads);\n      } else {\n        console.error('Failed to fetch message threads:', data.message);\n      }\n    } catch (error) {\n      console.error('Error fetching message threads:', error);\n    }\n  };\n\n  const handleUserSelection = async (username: string) => {\n    const existingThread = messageThreads.find(t => t.otherUser === username);\n    \n    if (existingThread) {\n      setSelectedThread(existingThread);\n      setIsNewConversation(false);\n      await fetchMessages(username);\n    } else {\n      const newThread: MessageThread = {\n        id: `new-${username}`,\n        otherUser: username,\n        lastMessage: 'Start a new conversation...',\n        timestamp: new Date().toISOString(),\n        unread: false\n      };\n      setSelectedThread(newThread);\n      setIsNewConversation(true);\n      setMessages([]);\n    }\n  };\n\n  const fetchMessages = async (otherUser: string) => {\n    if (!user) return;\n\n    try {\n      const response = await fetch(\n        `${API_BASE_URL}/api/messages/${user.username}/${otherUser}`\n      );\n      const data = await response.json();\n\n      if (data.success) {\n        setMessages(data.messages);\n        \n        if (data.messages.length > 0) {\n          await markMessagesAsRead(user.username, otherUser);\n        }\n      } else {\n        console.error('Failed to fetch messages:', data.message);\n      }\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n    }\n  };\n\n  const markMessagesAsRead = async (username: string, otherUser: string) => {\n    try {\n      await fetch(`${API_BASE_URL}/api/messages/mark-read`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          username,\n          otherUser,\n        }),\n      });\n\n      setMessageThreads(prev =>\n        prev.map(thread =>\n          thread.otherUser === otherUser ? { ...thread, unread: false } : thread\n        )\n      );\n    } catch (error) {\n      console.error('Error marking messages as read:', error);\n    }\n  };\n\n  const sendFirstMessage = async (message: string) => {\n    if (!user || !selectedThread) return;\n\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/messages/send`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          fromUser: user.username,\n          toUser: selectedThread.otherUser,\n          message: message.trim(),\n        }),\n      });\n\n      const data = await response.json();\n\n      if (data.success) {\n        await fetchMessageThreads(user.username);\n        await fetchMessages(selectedThread.otherUser);\n        setIsNewConversation(false);\n        return true;\n      } else {\n        console.error('Failed to send message:', data.message);\n        return false;\n      }\n    } catch (error) {\n      console.error('Error sending message:', error);\n      return false;\n    }\n  };\n\n  const handleSendMessage = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!newMessage.trim() || !selectedThread || !user) return;\n\n    setSending(true);\n    \n    try {\n      let success;\n      \n      if (isNewConversation) {\n        success = await sendFirstMessage(newMessage);\n      } else {\n        const response = await fetch(`${API_BASE_URL}/api/messages/send`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            fromUser: user.username,\n            toUser: selectedThread.otherUser,\n            message: newMessage.trim(),\n          }),\n        });\n\n        const data = await response.json();\n        success = data.success;\n\n        if (success) {\n          await fetchMessages(selectedThread.otherUser);\n          await fetchMessageThreads(user.username);\n        }\n      }\n\n      if (success) {\n        setNewMessage('');\n      } else {\n        alert('Failed to send message. Please try again.');\n      }\n    } catch (error) {\n      console.error('Error sending message:', error);\n      alert('An error occurred while sending the message.');\n    } finally {\n      setSending(false);\n    }\n  };\n\n  const handleThreadSelect = (thread: MessageThread) => {\n    setSelectedThread(thread);\n    setIsNewConversation(thread.id.startsWith('swap-owner-') || thread.id.startsWith('new-'));\n    \n    if (!thread.id.startsWith('swap-owner-') && !thread.id.startsWith('new-')) {\n      fetchMessages(thread.otherUser);\n    } else {\n      setMessages([]);\n    }\n  };\n\n  const startNewConversation = () => {\n    const username = prompt('Enter the username you want to message:');\n    if (username && user && username !== user.username) {\n      handleUserSelection(username);\n    } else if (username === user?.username) {\n      alert('You cannot message yourself.');\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage(e as any);\n    }\n  };\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const filteredThreads = messageThreads.filter(thread =>\n    thread.otherUser?.toLowerCase().includes(searchTerm?.toLowerCase())\n  );\n\n  const formatTimestamp = (timestamp: string) => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffInHours = (now.getTime() - date.getTime()) / (1000 * 60 * 60);\n\n    if (diffInHours < 24) {\n      return date.toLocaleTimeString('en-US', {\n        hour: '2-digit',\n        minute: '2-digit',\n      });\n    } else if (diffInHours < 168) {\n      return date.toLocaleDateString('en-US', { weekday: 'short' });\n    } else {\n      return date.toLocaleDateString('en-US', {\n        month: 'short',\n        day: 'numeric',\n      });\n    }\n  };\n\n  const formatMessageTime = (timestamp: string) => {\n    return new Date(timestamp).toLocaleTimeString('en-US', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const formatMessageDate = (timestamp: string) => {\n    return new Date(timestamp).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric'\n    });\n  };\n\n  const handleCreateAgreement = () => {\n    if (!selectedThread) return;\n    router.push(`/agreement?otherUser=${selectedThread.otherUser}`);\n  };\n\n  const handleViewAgreement = () => {\n    if (!existingAgreement) return;\n    router.push(`/agreement/${existingAgreement.id}`);\n  };\n\n  const getAgreementStatusBadge = (status: string) => {\n    const statusConfig: Record<string, { color: string; text: string }> = {\n      PENDING: { color: 'bg-yellow-100 text-yellow-800', text: 'Pending' },\n      ACCEPTED: { color: 'bg-green-100 text-green-800', text: 'Accepted' },\n      REJECTED: { color: 'bg-red-100 text-red-800', text: 'Rejected' },\n      COMPLETED: { color: 'bg-blue-100 text-blue-800', text: 'Completed' }\n    };\n\n    const config = statusConfig[status] || statusConfig.PENDING;\n    return (\n      <span className={`text-xs px-2 py-1 rounded-full ${config.color}`}>\n        {config.text}\n      </span>\n    );\n  };\n\n  const isSwapOwnerThread = selectedThread && swapOwnerInfo && \n    selectedThread.otherUser === swapOwnerInfo.username;\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-100 flex flex-col\">\n        <Menu user={user} />\n        <div className=\"flex-grow flex items-center justify-center\">\n          <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-purple-600\"></div>\n        </div>\n        <Footer />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 flex flex-col\">\n      <Menu user={user} />\n      \n      <main className=\"flex-grow\">\n        <div className=\"bg-white border-b border-gray-200 py-4\">\n          <div className=\"container mx-auto px-4\">\n            <div className=\"flex items-center space-x-2 text-sm\">\n              <button \n                onClick={() => router.back()}\n                className=\"flex items-center text-purple-600 hover:text-purple-700 cursor-pointer\"\n              >\n                <ArrowLeft size={16} className=\"mr-1\" />\n                Back\n              </button>\n              <span className=\"text-gray-400\">/</span>\n              <button \n                onClick={() => router.push('/dashboard')}\n                className=\"text-purple-600 hover:text-purple-700 cursor-pointer\"\n              >\n                Dashboard\n              </button>\n              <span className=\"text-gray-400\">/</span>\n              <span className=\"text-gray-600\">Messages</span>\n              {swapOwnerInfo && (\n                <>\n                  <span className=\"text-gray-400\">/</span>\n                  <span className=\"text-purple-600\">Contact {swapOwnerInfo.firstName}</span>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"max-w-6xl mx-auto\">\n            <div className=\"bg-white rounded-lg shadow-lg overflow-hidden\">\n              <div className=\"flex h-[600px]\">\n                <div className=\"w-1/3 border-r border-gray-200 flex flex-col\">\n                  <div className=\"p-4 border-b border-gray-200\">\n                    <div className=\"flex items-center justify-between mb-4\">\n                      <h2 className=\"text-xl font-bold text-gray-800\">Messages</h2>\n                      <button\n                        onClick={startNewConversation}\n                        className=\"bg-purple-600 text-yellow-400 p-2 rounded-lg hover:bg-purple-700 transition duration-200 cursor-pointer\"\n                        title=\"Start new conversation\"\n                      >\n                        <Plus size={18} />\n                      </button>\n                    </div>\n                    <div className=\"relative\">\n                      <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" size={20} />\n                      <input\n                        type=\"text\"\n                        placeholder=\"Search conversations...\"\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                        className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600\"\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"flex-1 overflow-y-auto\">\n                    {filteredThreads.length === 0 && !searchTerm ? (\n                      <div className=\"text-center py-8 text-gray-500\">\n                        <MessageCircle size={48} className=\"mx-auto mb-4 text-gray-300\" />\n                        <p>No conversations yet</p>\n                        <p className=\"text-sm mt-2\">Start a conversation by contacting a swoper!</p>\n                        <button\n                          onClick={startNewConversation}\n                          className=\"mt-4 bg-purple-600 text-yellow-400 px-4 py-2 rounded-lg hover:bg-purple-700 transition duration-200 cursor-pointer\"\n                        >\n                          Start New Conversation\n                        </button>\n                      </div>\n                    ) : (\n                      <div className=\"p-2\">\n                        {filteredThreads.map((thread) => {\n                          const isSwapOwner = swapOwnerInfo && thread.otherUser === swapOwnerInfo.username;\n                          return (\n                            <button\n                              key={thread.id}\n                              onClick={() => handleThreadSelect(thread)}\n                              className={`w-full text-left p-3 rounded-lg transition duration-200 mb-2 ${\n                                selectedThread?.otherUser === thread.otherUser\n                                  ? 'bg-purple-100 border border-purple-200'\n                                  : 'hover:bg-gray-50'\n                              } ${isSwapOwner ? 'border-l-4 border-l-yellow-400' : ''}`}\n                            >\n                              <div className=\"flex items-center space-x-3\">\n                                <div className=\"relative\">\n                                  <div className={`w-12 h-12 rounded-full flex items-center justify-center ${\n                                    isSwapOwner ? 'bg-yellow-100' : 'bg-purple-100'\n                                  }`}>\n                                    <User className={isSwapOwner ? 'text-yellow-600' : 'text-purple-600'} size={20} />\n                                  </div>\n                                  {thread.unread && (\n                                    <div className=\"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white\"></div>\n                                  )}\n                                  {isSwapOwner && (\n                                    <div className=\"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white flex items-center justify-center\">\n                                      <Star size={8} className=\"text-white\" />\n                                    </div>\n                                  )}\n                                </div>\n                                <div className=\"flex-1 min-w-0\">\n                                  <div className=\"flex justify-between items-start\">\n                                    <div className=\"flex items-center flex-wrap gap-1\">\n                                      <h5 className=\"font-semibold text-gray-800 truncate\">\n                                        {isSwapOwner ? swapOwnerInfo.firstName : `${thread.otherUser}`}\n                                      </h5>\n                                      {isSwapOwner && (\n                                        <span className=\"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full whitespace-nowrap\">\n                                          Swap Owner\n                                        </span>\n                                      )}\n                                    </div>\n                                    <span className=\"text-xs text-gray-500 whitespace-nowrap ml-2\">\n                                      {formatTimestamp(thread.timestamp)}\n                                    </span>\n                                  </div>\n                                  <p className=\"text-sm text-gray-600 truncate\">\n                                    {thread.lastMessage}\n                                  </p>\n                                  {thread.unread && (\n                                    <span className=\"inline-block mt-1 text-xs bg-purple-600 text-white px-2 py-1 rounded-full\">\n                                      New messages\n                                    </span>\n                                  )}\n                                </div>\n                              </div>\n                            </button>\n                          );\n                        })}\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                <div className=\"flex-1 flex flex-col\">\n                  {selectedThread ? (\n                    <>\n                      <div className=\"p-4 border-b border-gray-200 flex items-center justify-between bg-gray-50\">\n                        <div className=\"flex items-center space-x-3\">\n                          <div className={`w-10 h-10 rounded-full flex items-center justify-center ${\n                            isSwapOwnerThread ? 'bg-yellow-100' : 'bg-purple-100'\n                          }`}>\n                            <User className={isSwapOwnerThread ? 'text-yellow-600' : 'text-purple-600'} size={18} />\n                          </div>\n                          <div>\n                            <div className=\"flex items-center space-x-2\">\n                              <h3 className=\"font-semibold text-gray-800\">\n                                {isSwapOwnerThread && swapOwnerInfo \n                                  ? `${swapOwnerInfo.firstName} ${swapOwnerInfo.lastName}`\n                                  : `${selectedThread.otherUser}`\n                                }\n                              </h3>\n                              {isSwapOwnerThread && (\n                                <span className=\"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full\">\n                                  Swap Owner\n                                </span>\n                              )}\n                              {isNewConversation && (\n                                <span className=\"text-xs bg-blue-500 text-white px-2 py-1 rounded-full\">\n                                  New\n                                </span>\n                              )}\n                              {existingAgreement && getAgreementStatusBadge(existingAgreement.status)}\n                            </div>\n                            <p className=\"text-sm text-gray-500\">\n                              {isNewConversation \n                                ? (isSwapOwnerThread ? 'Contact about their swap listing' : 'Start a new conversation')\n                                : 'Online'\n                              }\n                            </p>\n                          </div>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          {hasSwapsWithOtherUser && !isNewConversation && (\n                            <>\n                              {checkingAgreement ? (\n                                <div className=\"flex items-center space-x-2 text-gray-500\">\n                                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-600\"></div>\n                                  <span className=\"text-sm\">Checking...</span>\n                                </div>\n                              ) : existingAgreement ? (\n                                <button \n                                  onClick={handleViewAgreement}\n                                  className=\"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition duration-200 font-medium text-sm cursor-pointer flex items-center space-x-2\"\n                                  title=\"View existing agreement\"\n                                >\n                                  <Eye size={16} />\n                                  <span>View Agreement</span>\n                                </button>\n                              ) : (\n                                <button \n                                  onClick={handleCreateAgreement}\n                                  className=\"bg-purple-600 text-yellow-400 px-3 py-2 rounded-lg hover:bg-purple-700 transition duration-200 font-medium text-sm cursor-pointer flex items-center space-x-2\"\n                                  title=\"Create a swap agreement with this user\"\n                                >\n                                  <FileText size={16} />\n                                  <span>Create Agreement</span>\n                                </button>\n                              )}\n                            </>\n                          )}\n                          <button className=\"text-gray-400 hover:text-gray-600 cursor-pointer\">\n                            <MoreVertical size={20} />\n                          </button>\n                        </div>\n                      </div>\n\n                      <div className=\"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50\">\n                        {messages.length === 0 && !isNewConversation ? (\n                          <div className=\"text-center py-8 text-gray-500\">\n                            <MessageCircle size={48} className=\"mx-auto mb-4 text-gray-300\" />\n                            <p>No messages yet in this conversation</p>\n                            <p className=\"text-sm mt-2\">Start the conversation about potential swaps!</p>\n                          </div>\n                        ) : messages.length === 0 && isNewConversation ? (\n                          <div className=\"text-center py-8 text-gray-500\">\n                            <Plus size={48} className=\"mx-auto mb-4 text-gray-300\" />\n                            <p>\n                              {isSwapOwnerThread && swapOwnerInfo\n                                ? `Start a conversation with ${swapOwnerInfo.firstName} about their swap`\n                                : `Start a new conversation with ${selectedThread.otherUser}`\n                              }\n                            </p>\n                            <p className=\"text-sm mt-2\">\n                              {isSwapOwnerThread \n                                ? 'Send them a message to discuss their swap listing!'\n                                : 'Send your first message to begin chatting about swaps!'\n                              }\n                            </p>\n                          </div>\n                        ) : (\n                          messages.map((message, index) => {\n                            const isCurrentUser = message.fromUser === user?.username;\n                            const showDate = index === 0 || \n                              new Date(message.timestamp).toDateString() !== \n                              new Date(messages[index - 1].timestamp).toDateString();\n\n                            return (\n                              <div key={message.id}>\n                                {showDate && (\n                                  <div className=\"text-center my-4\">\n                                    <span className=\"bg-gray-200 text-gray-600 text-xs px-3 py-1 rounded-full\">\n                                      {formatMessageDate(message.timestamp)}\n                                    </span>\n                                  </div>\n                                )}\n                                \n                                <div className={`flex ${isCurrentUser ? 'justify-end' : 'justify-start'}`}>\n                                  <div\n                                    className={`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${\n                                      isCurrentUser\n                                        ? 'bg-purple-600 text-white rounded-br-none'\n                                        : 'bg-white text-gray-800 border border-gray-200 rounded-bl-none'\n                                    }`}\n                                  >\n                                    <p className=\"text-sm\">{message.message}</p>\n                                    <p\n                                      className={`text-xs mt-1 ${\n                                        isCurrentUser\n                                          ? 'text-purple-200'\n                                          : 'text-gray-500'\n                                      }`}\n                                    >\n                                      {formatMessageTime(message.timestamp)}\n                                    </p>\n                                  </div>\n                                </div>\n                              </div>\n                            );\n                          })\n                        )}\n                        <div ref={messagesEndRef} />\n                      </div>\n\n                      <div className=\"p-4 border-t border-gray-200 bg-white\">\n                        <div className=\"flex space-x-2\">\n                          <button\n                            type=\"button\"\n                            className=\"p-2 text-gray-400 hover:text-purple-600 cursor-pointer transition duration-200\"\n                            title=\"Attach file\"\n                          >\n                            <Paperclip size={20} />\n                          </button>\n                          <div className=\"flex-1 relative\">\n                            <input\n                              type=\"text\"\n                              value={newMessage}\n                              onChange={(e) => setNewMessage(e.target.value)}\n                              onKeyPress={handleKeyPress}\n                              placeholder={\n                                isSwapOwnerThread && isNewConversation\n                                  ? `Message ${swapOwnerInfo?.firstName} about their swap...`\n                                  : isNewConversation \n                                    ? `Send your first message to ${selectedThread.otherUser}...` \n                                    : \"Type your message about the swap...\"\n                              }\n                              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600\"\n                              disabled={sending}\n                            />\n                            {sending && (\n                              <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-600\"></div>\n                              </div>\n                            )}\n                          </div>\n                          <button\n                            type=\"button\"\n                            onClick={(e) => handleSendMessage(e as any)}\n                            disabled={!newMessage.trim() || sending}\n                            className=\"bg-purple-600 text-yellow-400 px-4 py-2 rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed cursor-pointer transition duration-200 flex items-center\"\n                          >\n                            <Send size={18} className=\"mr-2\" />\n                            {isNewConversation ? 'Start Chat' : 'Send'}\n                          </button>\n                        </div>\n                      </div>\n                    </>\n                  ) : (\n                    <div className=\"flex-1 flex items-center justify-center text-gray-500 bg-gray-50\">\n                      <div className=\"text-center\">\n                        <MessageCircle size={64} className=\"mx-auto mb-4 text-gray-300\" />\n                        <h3 className=\"text-xl font-semibold text-gray-600 mb-2\">No Conversation Selected</h3>\n                        <p className=\"text-gray-500 mb-4\">Choose a conversation from the list or start a new one</p>\n                        <button\n                          onClick={startNewConversation}\n                          className=\"bg-purple-600 text-yellow-400 px-6 py-2 rounded-lg hover:bg-purple-700 transition duration-200 font-medium cursor-pointer mr-2\"\n                        >\n                          Start New Conversation\n                        </button>\n                        <button\n                          onClick={() => router.push('/swaps')}\n                          className=\"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition duration-200 font-medium cursor-pointer\"\n                        >\n                          Browse Swaps\n                        </button>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}